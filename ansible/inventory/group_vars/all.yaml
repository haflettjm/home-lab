---
# ==============================================================================
# Global variables - applied to ALL hosts
# ==============================================================================

# ------------------------------------------------------------------------------
# K3s cluster settings
# ------------------------------------------------------------------------------
k3s_version: "v1.31.4+k3s1"
cluster_cidr: "10.42.0.0/16"
service_cidr: "10.43.0.0/16"
cluster_dns: "10.43.0.10"

# ------------------------------------------------------------------------------
# MetalLB load balancer IP range
# ------------------------------------------------------------------------------
metallb_ip_range: "192.168.1.200-192.168.1.220"

# ------------------------------------------------------------------------------
# System settings
# ------------------------------------------------------------------------------
timezone: "America/New_York"
selinux_state: permissive

# ------------------------------------------------------------------------------
# SSH authorized keys (add your public keys here)
# ------------------------------------------------------------------------------
ssh_authorized_keys: []
# - "ssh-ed25519 AAAAC3... user@workstation"

# ------------------------------------------------------------------------------
# Common packages installed on ALL nodes (from phase2/reqs/common-reqs)
# ------------------------------------------------------------------------------
common_packages:
  - vim
  - tmux
  - htop
  - curl
  - wget
  - git
  - net-tools
  - bind-utils
  - lsof
  - bash-completion
  - unzip
  - jq
  - firewalld
  - policycoreutils
  - chrony
  - rsync
  - tar
  - gzip

# ------------------------------------------------------------------------------
# Sysctl parameters for Kubernetes networking
# ------------------------------------------------------------------------------
k8s_sysctl_params:
  net.bridge.bridge-nf-call-iptables: 1
  net.bridge.bridge-nf-call-ip6tables: 1
  net.ipv4.ip_forward: 1

# ------------------------------------------------------------------------------
# Kernel modules required for Kubernetes
# ------------------------------------------------------------------------------
k8s_kernel_modules:
  - overlay
  - br_netfilter

# ------------------------------------------------------------------------------
# K3s API server address (control plane VIP or first master IP)
# ------------------------------------------------------------------------------
k3s_server_url: "https://192.168.1.100:6443"
k3s_token_file: /var/lib/rancher/k3s/server/node-token

# ------------------------------------------------------------------------------
# Kubeconfig fetch location on the Ansible controller
# ------------------------------------------------------------------------------
kubeconfig_local_path: "{{ playbook_dir }}/../kubeconfig/k3s.yaml"
